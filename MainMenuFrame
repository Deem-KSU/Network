import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MainMenuFrame extends JFrame {
    
    private Client networkClient; 

    private JButton bookButton;
    private JButton exitButton;
    private JLabel welcomeLabel;
    private JLabel sloganLabel;

    public MainMenuFrame(Client client) {
        this.networkClient = client;
        
        setTitle("PingTrip - Main Menu");
        setSize(400, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null); 
        
        JPanel panel = new JPanel(new GridBagLayout());
        panel.setBackground(UIManager.getColor("Panel.background"));
        
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(8, 15, 8, 15); 
        gbc.fill = GridBagConstraints.HORIZONTAL;
        
        int row = 0;
        
        welcomeLabel = new JLabel("Welcome to PingTrip!", SwingConstants.CENTER);
        welcomeLabel.setFont(new Font("SansSerif", Font.BOLD, 16));
        
        gbc.gridx = 0; gbc.gridy = row++;
        gbc.gridwidth = 1; 
        panel.add(Box.createVerticalStrut(20), gbc); 

        gbc.gridx = 0; gbc.gridy = row++;
        gbc.gridwidth = 1;
        panel.add(welcomeLabel, gbc);

        sloganLabel = new JLabel("Book your next journey quickly and easily.", SwingConstants.CENTER);
        sloganLabel.setFont(new Font("SansSerif", Font.PLAIN, 12));
        
        gbc.gridx = 0; gbc.gridy = row++;
        panel.add(sloganLabel, gbc);
        
        gbc.gridx = 0; gbc.gridy = row++;
        panel.add(Box.createVerticalStrut(20), gbc); 

        // زر الحجز
        bookButton = new JButton("Book New Ticket");
        bookButton.setPreferredSize(new Dimension(250, 35));
        
        gbc.gridx = 0; gbc.gridy = row++;
        panel.add(bookButton, gbc);
        bookButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                new BookingFrame(networkClient).setVisible(true);
            }
        });

        exitButton = new JButton("Exit");
        exitButton.setPreferredSize(new Dimension(250, 35)); 
        
        gbc.gridx = 0; gbc.gridy = row++;
        panel.add(exitButton, gbc);
        exitButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if(networkClient != null) {
                    networkClient.sendCommand("EXIT");  
                    networkClient.closeConnection();    
                }
                System.exit(0); 
            }
        });

        add(panel); 
    }
}
